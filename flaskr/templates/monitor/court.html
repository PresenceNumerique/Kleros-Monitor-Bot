{% extends 'base.html' %}

{% block header %}
  <div class="row">
    <div class="col">
      <h4>{% block title %}Court: <span class="font-weight-bold">{{court.name}}</span>{% endblock %}</h4>
    </div>
    <div class="col">
      <div align=right>Last updated: <span class="datetime-string">{{last_updated}}</span> UTC</div>
    </div>
  </div>
{% endblock %}

{% block content %}

  <div class="mt-3 mb-5">
  <table class="table table-bordered responsive table-sm">
    <tr bgcolor='#7d5fc9'><td>Total Number Of Jurors</td><td>Average Stake</td><td>Median Stake</td></tr>
    <tr>
      <td>{{ jurors_stats['length']}}</td>
      <td>{{ jurors_stats['mean']}}</td>
      <td>{{ jurors_stats['median']}}</td>
    </tr>
  </table>

  <div class="mt-3 mb-5">
  <table class="table table-bordered responsive table-sm">
   
    <tr bgcolor="#9977f2"><td>Address</td><td>Date</td><td>Staking amount</td></tr>
    {% for juror in jurors %}
      <tr>
        <td><a href="https://etherscan.io/address/{{ juror['address'] }}">{{ juror['address'] }}</a></td>
        <td class="datetime-string">{{ juror['date'] }}</td>
        <td>{{ juror['staking_amount'] }}</td>
      </tr>
    {% endfor %}
  </table>

  <p><hr/></p>
<div class="mt-3 mb-2">
    <table class="table table-bordered responsive table-sm">
      <tr bgcolor="#9977f2">
        <td>ID</td>
        <td>
          Ruling <i class="fa fa-question-circle cursor-help" 
            title="0: Refuse to arbitrate <br/> 1: Yes <br/> 2: No"
            data-toggle="tooltip" data-placement="right" aria-hidden="true"></i>
        </td>
        <td>Final</td>
        <td>Creator</td>
        <td>Creation Date</td>
      </tr>
      {% for dispute in disputes %}
          <tr bgcolor={{'#90EE90' if dispute.ruled else '#FFFCBB'}}>
            <td><a href="{{ url_for('dispute', id = dispute.id) }}">{{ dispute.id }}</a></td>
            <td>{{dispute.current_ruling}}</td>
            <td>{{'Yes' if dispute.ruled else 'No'}}</td>
            <td>
              <a href="https://etherscan.io/address/{{dispute.created_by}}">{{dispute.created_by[:12]}}...</a>&nbsp;
              <a href="https://etherscan.io/tx/{{dispute.created_tx}}">[txid]</a>&nbsp;
            </td>
            <td>{{dispute.created_date}}</td>
          </tr>
      {% endfor %}
    </table>
</div>
{% endblock %}
